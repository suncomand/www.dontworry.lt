{"ast":null,"code":"var _jsxFileName = \"/Users/martynasdzindzeleta/WebstormProjects/kasvyksta24/src/pages/UploadPage1.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UploadPage1 = ({\n  secret\n}) => {\n  _s();\n  const titleRef = useRef();\n  const descriptionRef = useRef();\n  const imageRef = useRef();\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false); // To handle loading state\n\n  function upload() {\n    if (!imageRef.current.files[0]) {\n      setError(\"Please select an image.\");\n      return;\n    }\n    if (!titleRef.current.value || !descriptionRef.current.value) {\n      setError(\"Title and Description are required.\");\n      return;\n    }\n\n    // Create FormData\n    const postData = new FormData();\n    postData.append(\"image\", imageRef.current.files[0]); // Append the image file\n    postData.append(\"description\", descriptionRef.current.value);\n    postData.append(\"title\", titleRef.current.value);\n    postData.append(\"secretKey\", secret);\n    setLoading(true); // Start loading\n\n    const options = {\n      method: \"POST\",\n      body: postData // Use FormData to send file\n    };\n    fetch(\"http://167.99.138.67:1111/createpost\", options).then(res => res.json()).then(response => {\n      console.log(response);\n      if (response.success) {\n        setError(null); // Clear any previous errors\n        // Handle success, maybe redirect the user\n        // navigate('/some-path'); // Uncomment if you want to navigate after success\n      } else {\n        setError(response.message || \"An error occurred while uploading.\");\n      }\n    }).catch(err => {\n      console.error(\"Error uploading the post:\", err);\n      setError(\"An unexpected error occurred.\");\n    }).finally(() => {\n      setLoading(false); // Stop loading\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex j-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex direction-col gap10 authForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Create Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        ref: imageRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Title\",\n        ref: titleRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Description\",\n        ref: descriptionRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: upload,\n        disabled: loading,\n        children: loading ? \"Uploading...\" : \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n_s(UploadPage1, \"TtgZgkT91mL7KJYcP2op/2aaUio=\");\n_c = UploadPage1;\nexport default UploadPage1;\nvar _c;\n$RefreshReg$(_c, \"UploadPage1\");","map":{"version":3,"names":["React","useRef","useState","useNavigate","jsxDEV","_jsxDEV","UploadPage1","secret","_s","titleRef","descriptionRef","imageRef","error","setError","loading","setLoading","upload","current","files","value","postData","FormData","append","options","method","body","fetch","then","res","json","response","console","log","success","message","catch","err","finally","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","ref","placeholder","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/martynasdzindzeleta/WebstormProjects/kasvyksta24/src/pages/UploadPage1.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { useNavigate } from \"react-router-dom\";\n\nconst UploadPage1 = ({ secret }) => {\n    const titleRef = useRef();\n    const descriptionRef = useRef();\n    const imageRef = useRef();\n\n    const [error, setError] = useState(null);\n    const [loading, setLoading] = useState(false); // To handle loading state\n\n    function upload() {\n        if (!imageRef.current.files[0]) {\n            setError(\"Please select an image.\");\n            return;\n        }\n        if (!titleRef.current.value || !descriptionRef.current.value) {\n            setError(\"Title and Description are required.\");\n            return;\n        }\n\n        // Create FormData\n        const postData = new FormData();\n        postData.append(\"image\", imageRef.current.files[0]); // Append the image file\n        postData.append(\"description\", descriptionRef.current.value);\n        postData.append(\"title\", titleRef.current.value);\n        postData.append(\"secretKey\", secret);\n\n        setLoading(true); // Start loading\n\n        const options = {\n            method: \"POST\",\n            body: postData, // Use FormData to send file\n        };\n\n        fetch(\"http://167.99.138.67:1111/createpost\", options)\n            .then((res) => res.json())\n            .then((response) => {\n                console.log(response);\n                if (response.success) {\n                    setError(null); // Clear any previous errors\n                    // Handle success, maybe redirect the user\n                    // navigate('/some-path'); // Uncomment if you want to navigate after success\n                } else {\n                    setError(response.message || \"An error occurred while uploading.\");\n                }\n            })\n            .catch((err) => {\n                console.error(\"Error uploading the post:\", err);\n                setError(\"An unexpected error occurred.\");\n            })\n            .finally(() => {\n                setLoading(false); // Stop loading\n            });\n    }\n\n    return (\n        <div className=\"d-flex j-center\">\n            <div className=\"d-flex direction-col gap10 authForm\">\n                <h1>Create Post</h1>\n\n                {/* File input */}\n                <input type=\"file\" ref={imageRef} />\n                <input type=\"text\" placeholder=\"Title\" ref={titleRef} />\n                <input type=\"text\" placeholder=\"Description\" ref={descriptionRef} />\n\n                {/* Display error message if there's any */}\n                {error && <h3>{error}</h3>}\n\n                {/* Button with loading state */}\n                <button onClick={upload} disabled={loading}>\n                    {loading ? \"Uploading...\" : \"Upload\"}\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default UploadPage1;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}